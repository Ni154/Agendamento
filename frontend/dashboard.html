<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Studio • Início</title>

  <!-- CSS do projeto -->
  <link rel="stylesheet" href="/assets/css/style.css?v=5"/>
  <link rel="stylesheet" href="/assets/css/app.css?v=5"/>

  <!-- ========== SNIPPET EMBED (idêntico nas páginas internas) ========== -->
  <script>
  /* EMBED: se abrir em iframe ou com ?embed=1, esconda a navegação interna
     e force o conteúdo a ocupar 100% da aba (sem margens/paddings laterais). */
  (function () {
    try {
      var q = new URLSearchParams(location.search);
      var isEmbed = q.get('embed') === '1' || (window.self !== window.top);
      if (!isEmbed) return;

      document.documentElement.classList.add('is-embed');
      document.body.classList.add('is-embed');

      var s = document.createElement('style');
      s.textContent = `
        /* some tudo que seja navegação interna */
        .sidebar, .sb-menu, .sb-top { display:none !important; }
        /* zere qualquer grade/coluna da app */
        .app{ display:block !important; grid-template-columns: 1fr !important; }
        /* garanta que o conteúdo não tenha recuos de layout herdados */
        .content{
          margin:0 !important;
          padding:24px 16px !important;
          min-height:100vh !important;
          width:100% !important;
          max-width:100% !important;
        }
        /* cards devem expandir */
        .card{ width:100% !important; max-width:none !important; }
      `;
      document.head.appendChild(s);
    } catch(e) { /* silencioso */ }
  })();
  </script>
  <!-- =================================================================== -->
</head>

<body data-brand="#B89B61" data-brand2="#E7DBBE">
  <div class="app" id="appRoot">
    <!-- Sidebar (visível quando a página roda sozinha, não em EMBED) -->
    <aside class="sidebar">
      <div class="sb-top">
        <img class="logo-img" src="/assets/img/logo.png" alt="Logo"/>
             onerror="this.onerror=null;this.src='/assets/img/logo.png.jpeg';"
             alt="Logo"/>
        <div class="brandname">Studio Priscila Santos</div>
        <button class="toggle" id="btnToggle" title="Recolher/Expandir">≡</button>
      </div>

      <nav class="sb-menu">
        <a class="sb-item active" href="/dashboard.html"><span class="sb-ico">🏠</span><span class="sb-text">Início</span></a>
        <a class="sb-item" href="/clientes.html"><span class="sb-ico">🧍</span><span class="sb-text">Cadastro Cliente</span></a>
        <a class="sb-item" href="/produtos.html"><span class="sb-ico">📦</span><span class="sb-text">Cadastro Produtos</span></a>
        <a class="sb-item" href="/servicos.html"><span class="sb-ico">💆</span><span class="sb-text">Cadastro Serviços</span></a>
        <a class="sb-item" href="/agendamentos.html"><span class="sb-ico">📅</span><span class="sb-text">Agendamento</span></a>
        <a class="sb-item" href="/vendas.html"><span class="sb-ico">💰</span><span class="sb-text">Vendas</span></a>
        <a class="sb-item" href="/despesas.html"><span class="sb-ico">💸</span><span class="sb-text">Despesas</span></a>
        <a class="sb-item" href="/relatorios.html"><span class="sb-ico">📈</span><span class="sb-text">Relatórios</span></a>
        <a class="sb-item" href="/index.html" title="Sair"><span class="sb-ico">🔓</span><span class="sb-text">Sair</span></a>
      </nav>
    </aside>

    <!-- Conteúdo -->
    <main class="content">
      <div class="card">
        <h2>Bem-vindo(a)</h2>
        <div id="dash-greeting" class="muted">Carregando...</div>
      </div>

      <div class="card" style="margin-top:16px">
        <h2>Resumo do dia</h2>
        <div class="grid cols-2" style="margin-top:8px">
          <div class="input full"><label>Agendamentos de hoje</label><div id="dash-today-appointments" class="note">—</div></div>
          <div class="input full"><label>Vendas de hoje</label><div id="dash-today-sales" class="note">—</div></div>
          <div class="input full"><label>Despesas de hoje</label><div id="dash-expenses-today" class="note">—</div></div>
          <div class="input full"><label>Itens com estoque baixo</label><div id="dash-stock-low" class="note">—</div></div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h2>Ações rápidas</h2>
        <div class="actions">
          <a class="btn" id="btnQuickAg" href="/agendamentos.html">Novo agendamento</a>
          <a class="btn" id="btnQuickVen" href="/vendas.html">Nova venda</a>
          <a class="btn" id="btnQuickDesp" href="/despesas.html">Lançar despesa</a>
        </div>
      </div>
    </main>
  </div>

  <!-- Scripts -->
  <script src="/js/theme.js?v=5" defer></script>
  <script defer>
  // recolher/expandir sidebar (quando página roda sozinha)
  document.getElementById('btnToggle')?.addEventListener('click', ()=>{
    const root = document.getElementById('appRoot');
    if(!root) return;
    root.classList.toggle('sidebar-hidden');           // esconde tipo “cortina”
    localStorage.setItem('sb-hidden', root.classList.contains('sidebar-hidden')?'1':'0');
  });
  // restaura estado
  (function(){
    const hidden = localStorage.getItem('sb-hidden') === '1';
    if (hidden) document.getElementById('appRoot')?.classList.add('sidebar-hidden');
  })();

  // links rápidos respeitam ?embed=1
  (function(){
    var q = new URLSearchParams(location.search);
    var isEmbed = q.get('embed') === '1' || (window.self !== window.top);
    if(!isEmbed) return;
    ['btnQuickAg','btnQuickVen','btnQuickDesp'].forEach(id=>{
      var a = document.getElementById(id);
      if(!a) return;
      var u = new URL(a.getAttribute('href'), location.origin);
      u.searchParams.set('embed','1');
      a.setAttribute('href', u.pathname + u.search);
    });
  })();

  // cabeçalho simples
  (function(){
    try{
      const name = localStorage.getItem('user_name') || 'Usuário';
      const greet = document.getElementById('dash-greeting');
      if(greet) greet.textContent = `Olá, ${name}!`;
    }catch(_){}
  })();

  // stubs resumo
  (function(){
    const set = (id, val) => { const el = document.getElementById(id); if(el) el.textContent = val; };
    set('dash-today-appointments', '—');
    set('dash-today-sales',        '—');
    set('dash-expenses-today',     '—');
    set('dash-stock-low',          '—');
  })();
  </script>
</body>
</html>
